import codecs
import re

# 读取已转换的文件
with open(r'C:\Dev\PythonBox\predict_classification_gold_fixed.py', 'r', encoding='utf-8') as f:
    content = f.read()

# 修复常见的中文乱码字符
replacements = {
    '决策?': '决策树',
    '训练数?': '训练数据',
    '黄金价?': '黄金价格',
    '下一期时?': '下一期时间',
    '收益率区间划?': '收益率区间划分',
    '准确?': '准确率',
    '预测?': '预测值',
    '判断条?': '判断条件',
    '下?': '下界',
    '上?': '上界',
    '当期价?': '当期价格',
    '下期价?': '下期价格',
    '结束期?': '结束期数',
    '高斯核函数分?': '高斯核函数分类',
    '收益率概率分?': '收益率概率分布',
    '累积概率?.5左侧的位?': '累积概率0.5左侧的位置',
    '累积概率?.5右侧的位?': '累积概率0.5右侧的位置',
    '收益率区间中?': '收益率区间中点',
    '预测收益率中位?': '预测收益率中位数',
    '预测收益率均?': '预测收益率均值',
    '预测价格均?': '预测价格均值',
    '累积概率?.05左侧的位?': '累积概率0.05左侧的位置',
    '累积概率?.95左侧的位?': '累积概率0.95左侧的位置',
    '累积概率?.1左侧的位?': '累积概率0.1左侧的位置',
    '累积概率?.9左侧的位?': '累积概率0.9左侧的位置',
    '累积概率?.25左侧的位?': '累积概率0.25左侧的位置',
    '累积概率?.75左侧的位?': '累积概率0.75左侧的位置',
    '累积概率?.16左侧的位?': '累积概率0.16左侧的位置',
    '累积概率?.84左侧的位?': '累积概率0.84左侧的位置',
    '预测收益率10%分位?': '预测收益率10%分位数',
    '预测收益率90%分位?': '预测收益率90%分位数',
    '预测收益率25%分位?': '预测收益率25%分位数',
    '预测收益率75%分位?': '预测收益率75%分位数',
    '预测收益率16%分位?': '预测收益率16%分位数',
    '预测收益率84%分位?': '预测收益率84%分位数',
    '预测收益率5%分位?': '预测收益率5%分位数',
    '预测收益率95%分位?': '预测收益率95%分位数',
    '预测收益率分布偏?': '预测收益率分布偏度',
    'CSV文件?': 'CSV文件',
    '中文字可?': '中文字可用',
    '保存图片到指定路?': '保存图片到指定路径',
    '预测价格众数的下?': '预测价格众数的下界',
    '预测价格众数的上?': '预测价格众数的上界',
}

# 执行替换
for old, new in replacements.items():
    content = content.replace(old, new)

# 保存修复后的文件
with open(r'C:\Dev\PythonBox\predict_classification_gold_final.py', 'w', encoding='utf-8') as f:
    f.write(content)

print("中文字符修复完成，已保存到 predict_classification_gold_final.py")